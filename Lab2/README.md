# Отчет по лабораторной работе №2

---

## Задание (Rare)

1. Создать в каталоге для данной ЛР в своем репозитории виртуальное окружение и установить в него `matplotlib` и `numpy`. Создать файл `requirements.txt`.
2. Открыть [книгу [1]](https://evil-teacher.orbiter.website/books/prog_pm/matplotlib.pdf) и выполнить уроки 1-3. 
3. Выбрать одну из неразрывных функции своего варианта, построить график этой функции и касательную к ней. Добавить на график заголовок, подписи осей, легенду, сетку, а также аннотацию к точке касания.
4. Добавить в корень своего репозитория файл `.gitignore` [отсюда](https://github.com/still-coding/report_demo), перед тем как делать очередной коммит.
5. Оформить отчёт в `README.md`.
6. Склонировать этот репозиторий НЕ в свой репозиторий, а рядом. Изучить использование этого инструмента и создать pdf-версию своего отчёта из `README.md`. Добавить её в репозиторий.

---

# Описание проделанной работы

## 1. Подготовка окружения

Для начала работы было создано виртуальное окружение и установлены необходимые библиотеки, а именно, `matplotlib` и `numpy`.

**Команды:**
```bash
# Создание виртуального окружения
python -m venv venv
```
```bash
# Активация окружения
venv\Scripts\activate
```
```bash
# Установка библиотек
pip install matplotlib (numpy)
```
```bash
# Сохранение зависимостей
pip freeze > requirements.txt
```

---

# 2. Выполнение уроков 1-3 (из книги [1])
В процессе выполнения уроков были построены базовые графики для освоения функционала `matplotlib`.

## Урок 1: Базовые графики

В первом уроке были изучены основы построения графиков с использованием библиотеки `matplotlib`. Целью урока было освоение базового синтаксиса, построение различных типов графиков и знакомство с основными элементами визуализации.

### 1.1. Построение простого линейного графика

Первым шагом был построен простейший график путем прямой передачи списков координат точек.

![img.png](img/img.png)

### 1.2. Построение линейного графика с настройками

Далее был построен более информативный график линейной зависимости y = x с использованием библиотеки `numpy` для генерации данных. Были применены базовые настройки: добавлен заголовок, подписи осей и координатная сетка.

![img_1.png](img/img_1.png)

После этого был изменен стиль линии на красную пунктирную ('r--').

![img_2.png](img/img_2.png)

### 1.3. Построение нескольких графиков на одном поле

В этом разделе было показано, как отобразить две зависимости (y1 = x и y2 = x^2) на одной координатной плоскости для их сравнения.

![img_3.png](img/img_3.png)

## 1.4. Представление графиков на разных полях (subplots)

Четвертая часть урока была посвящена размещению графиков на отдельных областях в пределах одного окна.

![img_4.png](img/img_4.png)

## 1.5. Построение столбчатой диаграммы

В завершение урока была рассмотрена работа с данными на примере столбчатой диаграммы, отображающей количество фруктов.

![img_5.png](img/img_5.png)

---

## Урок 2.  Основы работы модулем pyplot

Второй урок был посвящен изучению возможностей модуля `pyplot`. Были рассмотрены различные способы построения графиков, настройка текстовых элементов, работа со стилями линий и цветом, а также различные подходы к размещению нескольких графиков.

### 2.1. Построение графиков с помощью plot()

Были рассмотрены различные варианты вызова функции `plot()`:

**Пустой график:**

![img_7.png](img/img_7.png)

**График только по значениям y:**

![img_8.png](img/img_8.png)

**График с заданными x и y:**

![img_9.png](img/img_9.png)

### 2.2. Текстовые надписи на графике

Были изучены функции для добавления текстовых элементов:

- xlabel() / ylabel() – подписи осей

- title() – заголовок графика

- text() – текстовое примечание в произвольном месте

- legend() – легенда

- grid() – включение сетки

**Пример использования:**

![img_10.png](img/img_10.png)

### 2.3. Работа с линейным графиком и цветом линий

Были изучены параметры настройки внешнего вида линий.

**Пример с штриховой линией:**

![img_11.png](img/img_11.png)

**Несколько графиков с разными стилями:**

![img_12.png](img/img_12.png)

**Пример с красной штриховой линией:**

![img_13.png](img/img_13.png)

**Красные кружки:**

![img_14.png](img/img_14.png)

**Синие крестики:**

![img_15.png](img/img_15.png)

### 2.4. Размещение графиков на разных полях

Был изучен способ размещения нескольких графиков на разных полях с помощью функций `subplot()` и `subplots()`:

![img_16.png](img/img_16.png)

---

## Урок 3. Настройка элементов графика

Третий урок посвящен настройке элементов графика: легенды, компоновке нескольких графиков, текстовым элементам и цветовой шкале.

### 3.1. Работа с легендой

Для отображения легенды используется функция `legend()`:

![img_17.png](img/img_17.png)

Можно вручную указать соответствие линий и меток:

![img_18.png](img/img_18.png)

Параметр `loc` позволяет задать положение легенды:

![img_19.png](img/img_19.png)

### 3.2. Компоновка графиков с GridSpec

Класс GridSpec позволяет создавать сложные компоновки с графиками различных размеров:

![img_20.png](img/img_20.png)

GridSpec позволяет создавать графики, занимающие несколько ячеек сетки:

![img_21.png](img/img_21.png)

Можно задавать соотношения ширины и высоты областей:

![img_22.png](img/img_22.png)

### 3.3. Текстовые элементы графика

В Matplotlib доступны различные текстовые элементы: заголовки, подписи осей, текстовые блоки и аннотации:

![img_23.png](img/img_23.png)

![img_24.png](img/img_24.png)

![img_25.png](img/img_25.png)

![img_26.png](img/img_26.png)

![img_27.png](img/img_27.png)

![img_28.png](img/img_28.png)

### 3.4. Цветовая полоса (Colorbar)

Colorbar используется для отображения соответствия между цветом и числовым значением на графиках типа `pcolor()`, `imshow()` и др:

![img_30.png](img/img_30.png)

![img_29.png](img/img_29.png)

![img_31.png](img/img_31.png)

---

## 3. Индивидуальное задание (Вариант 10)

### 3.1. Постановка задачи

Необходимо построить график неразрывной функции и касательную к ней в заданной точке.

![img_32.png](img/img_32.png)

### 3.2.  Теоретическая часть
Касательная к графику функции $f(x)$ в точке $x_0$ описывается уравнением:

$$y = f(x0) + f '(x0) * (x - x0)$$

где $f(x_0)$ - значение функции в точке касания, $f'(x0)$ - значение ее производной в этой точке.

### 3.3. Аналитическое решение 

Дана кусочная функция:

$$f(x) = 
\begin{cases} 
-\cos e^x, & 0 \leq x \leq 1; \\
\ln(2x + \sin x^2), & 1 < x \leq 2.
\end{cases}$$

Для построения касательной выберем первую функцию $f(x)=−cos(e^x)$ на отрезке [0,1]. Возьмем точку касания $x_0$ - середина интервала.

Вычислим значение функции в этой точке:

$$f(0.5)=−cos(e^{0.5})$$

Так как $e^{0.5} \approx$ 1.64872, а cos(1.64872) $\approx$ -0.078, то

$$f(0.5)=−(-0.078) = 0.078$$

Таким образом, точка касания имеет координаты (0.5; 0.078).

Далее, найдем производную функции $f(x)=−cos(e^x)$:

$$f'(x)=sin(e^x) * e^x$$

Подставим $x_0$ = 0.5:

$$f'(0.5)=sin(e^{0.5}) * e^{0.5} \approx 0.996 * 1.64872 \approx 1.642$$

Подставляем значения в уравнение касательной. Получим:

$$y = 0.078 + 1.642(x - 0.5) = 0.078 + 1.642x - 0.821 = 1.642x - 0.743$$

Итак, уравнение касательной к графику функции $f(x)=−cos(e^x)$ в точке $x_0 = 0.5$ есть

$$\boxed{y = 1.642x - 0.743}$$

Это прямая линия, которая касается графика в точке (0.5; 0.078).

### 3.4. Программа

```python
import numpy as np
import matplotlib.pyplot as plt

x = np.linspace(0, 1, 100) # Создаем точки на оси X
y = -np.cos(np.exp(x)) # Значения функции в этих точках

x0 = 0.5 # Выбираем точку касания

y0 = -np.cos(np.exp(x0)) # Значение функции в точке касания
k = np.sin(np.exp(x0)) * np.exp(x0) # Значение производной функции в точке касания
y_kas = y0 + k * (x - x0) # Уравнение касательной

plt.plot(x, y, 'g-', label='f(x) = -cos(e^x)') #Строим график функции (зеленая линия)
plt.plot(x, y_kas, '--', color='#A349A4', label='Касательная') # Строим касательную (фиолетовая пунктирная линия)
plt.scatter(x0, y0, color='purple', s = 50) # Отмечаем точку касания размером 50

plt.annotate(f'Точка касания\n({x0}, {y0:.3f})', # Добавляем подпись к точке касания со стрелкой
             xy=(x0, y0),
             xytext=(0.6, 0.2),
             arrowprops=dict(arrowstyle='->', color='black'))

plt.title('График функции и касательная (Вариант 10)') # Заголовок
plt.xlabel('x') # Подпись оси X
plt.ylabel('y') # Подпись оси Y
plt.grid(True) # Включаем сетку
plt.legend() # Показываем легенду

plt.show()
```

### 3.5. Результат работы программы

![img.png](img/graph.png)

---

# Список использованных источников:

1. [Devpractice Team. Библиотека Matplotlib](https://evil-teacher.orbiter.website/books/prog_pm/matplotlib.pdf)
2. [Matplotlib](https://matplotlib.org/)
3. [Лабораторная работа №2](https://evil-teacher.orbiter.website/prog_pm/lab02/)
